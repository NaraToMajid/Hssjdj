<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>3D Face Parallax</title>

<script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>

<style>
body {
  margin: 0;
  overflow: hidden;
  background: black;
}

#container {
  width: 100vw;
  height: 100vh;
  perspective: 800px;
  display: flex;
  justify-content: center;
  align-items: center;
}

#screen {
  width: 300px;
  height: 500px;
  background: linear-gradient(145deg, #1e1e1e, #333);
  border-radius: 20px;
  box-shadow: 0 40px 100px rgba(0,0,0,0.6);
  transform-style: preserve-3d;
  transition: transform 0.1s linear;
  display: flex;
  justify-content: center;
  align-items: center;
  color: white;
  font-family: sans-serif;
  font-size: 24px;
}

video {
  display: none;
}
</style>
</head>
<body>

<div id="container">
  <div id="screen">3D SCREEN</div>
</div>

<video id="video" autoplay playsinline></video>

<script>
const videoElement = document.getElementById('video');
const screen = document.getElementById('screen');

const faceMesh = new FaceMesh({
  locateFile: (file) => {
    return `https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/${file}`;
  }
});

faceMesh.setOptions({
  maxNumFaces: 1,
  refineLandmarks: true,
  minDetectionConfidence: 0.5,
  minTrackingConfidence: 0.5
});

faceMesh.onResults(results => {
  if (results.multiFaceLandmarks.length > 0) {
    const face = results.multiFaceLandmarks[0];

    // Ambil titik hidung (landmark 1)
    const nose = face[1];

    const x = (nose.x - 0.5) * 40;
    const y = (nose.y - 0.5) * 40;

    screen.style.transform =
      `rotateY(${x}deg) rotateX(${-y}deg)`;
  }
});

const camera = new Camera(videoElement, {
  onFrame: async () => {
    await faceMesh.send({ image: videoElement });
  },
  width: 640,
  height: 480
});

camera.start();
</script>

</body>
</html>
